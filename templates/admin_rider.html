<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- Font Awesome CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Bootstrap Icons CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Livvic:wght@400;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="d-sidebar" id="sidebar">
        <div class="text-center">
            <img src="static/img/stallion_routes.png" class="img-fluid border border-2 rounded-circle py-2" style="--bs-border-color: #EE940D;" width="100px" alt="stallion">
        </div>
        <h5 class="text-center h5 mt-3">Admin Dashboard</h5>
        <nav class="navbar flex">
            <ul class="nav flex-column">
                <li class="nav-item"><a class="nav-link" href="{{url_for('admin')}}"><i class="fas fa-home"></i> <span>Overview</span></a></li>
                <li class="nav-item"><a class="nav-link" href="#requests"><i class="fas fa-tasks"></i> <span>Requests</span></a></li>
                <li class="nav-item"><a class="nav-link active show" href="{{url_for('admin_rider')}}"><i class="fas fa-biking"></i> <span>Riders</span></a></li>
                <li class="nav-item"><a class="nav-link" href="{{url_for('admin_customer')}}"><i class="fas fa-users"></i> <span>Customers</span></a></li>
                <li class="nav-item">
                <a class="nav-link" href="#transactionMenu" data-bs-toggle="collapse" aria-expanded="false" aria-controls="transactionMenu">
                    <i class="fas fa-exchange-alt"></i> <span>Transactions</span> <i class="fa-solid fa-angle-down ms-auto"></i>
                </a>
                <div class="collapse" id="transactionMenu">
                    <a class="nav-link" href="#waybill">Waybill</a>
                    <a class="nav-link" href="#handoff">Handoff</a>
                </div>
                </li>
                <li class="nav-item"><a class="nav-link" href="#profile"><i class="fas fa-user"></i> <span>Profile</span></a></li>
                <li class="nav-item"><a class="nav-link" href="#signout"><i class="fas fa-sign-out-alt"></i> <span>Sign Out</span></a></li>
            </ul>
        </nav>
    </div>

    <div class="main-content" id="mainContent">
        <div class="header d-flex justify-content-between align-items-center">
            <div class="d-flex align-items-center">
                <button class="btn text-secondary me-2" id="toggleSidebar"><i class="fas fa-bars"></i></button>
                <input type="text" class="form-control border focus-ring" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);" placeholder="Search...">
            </div>
            <div class="d-flex align-items-center">
                <span class="position-relative">
                    <i class="fas fa-bell fa-lg me-3" style="cursor: pointer;"></i>
                    <span class="notification-badge">0</span>
                </span>
                <div class="profile position-relative">
                    <span data-bs-toggle="dropdown" aria-expanded="false" style="cursor: pointer;"><i class="bi-person-circle fs-4"></i></span>
                    <div class="dropdown-menu shadow position-absolute" style="top: 50px; left: -130px;">
                        <span class="dropdown-item-text">Admin Name</span>
                        <a class="dropdown-item" href="#">Profile</a>
                        <a class="dropdown-item" href="#">Account Settings</a>
                        <a class="dropdown-item" href="#">Sign Out</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="mb-3">
            <span class="form-label float-start me-2 py-1">State :</span>
            <select name="select-state" id="select-state" class="form-select border focus-ring w-25" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);">
                <option selected disabled value="">Choose a state</option>
                <option value="All">All</option>
                <option value="Aba">Aba</option>
                <option value="Awka">Awka</option>
                <option value="Ebonyi">Ebonyi</option>
                <option value="Enugu">Enugu</option>
                <option value="Uyo">Uyo</option>
            </select>
        </div>

        <!-- Overview Section -->
        <section id="overview" class="mb-5">
        <h4>Overview</h4>
        <div class="row">
            <div class="col-lg-3 col-md-6 col-sm-6 col-12 mb-3">
                <div class="card bg-success text-white">
                    <div class="card-body">
                        <h6 class="h6 text-dark">New/Active Requests</h6>
                        <p class="card-text">120</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-6 col-12 mb-3">
                <div class="card bg-info text-white">
                    <div class="card-body">
                        <h6 class="h6 text-dark">Delivered Requests</h6>
                        <p class="card-text">85</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-6 col-12 mb-3">
            <div class="card bg-warning text-white">
                <div class="card-body">
                    <h6 class="h6 text-dark">Total Customers</h6>
                    <p class="card-text">230</p>
                </div>
            </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-6 col-12 mb-3">
            <div class="card bg-danger text-white">
                <div class="card-body">
                    <h6 class="h6 text-dark">Total Riders</h6>
                    <p class="card-text">45</p>
                </div>
            </div>
            </div>
        </div>
        </section>

        <div class="row">
            <div class="col-lg-9">
                <!-- Display flash messages -->
                {% with messages = get_flashed_messages(with_categories=true) %}
                    {% if messages %}
                        <div class="col-12">
                        {% for category, message in messages %}
                            <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                            {{ message }}
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                            </div>
                        {% endfor %}
                        </div>
                    {% endif %}
                {% endwith %}

                <!-- Riders Section -->
                <section id="riders" class="mb-3">
                    <div class="d-flex mb-3">
                        <h4>Riders</h4>
                        <a href="#form-rider-reg" type="button" id="form-rider-reg-tab" class="btn btn-primary ms-auto">Add New Rider</a>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-striped table-hover text-nowrap">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Address</th>
                                    <th>State</th>
                                    <th>Bank Details</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% if rider_data %}
                                    {% for request in rider_data %}
                                        <tr>
                                            <td>{{ request.id }}</td>
                                            <td>{{ request.rider_name }}
                                                <p class="m-0">{{ request.rider_number }}</p>
                                            </td>
                                            <td>{{ request.rider_email }}</td>
                                            <td>{{ request.rider_address }}
                                                <p class="m-0">{{ request.city }}</p>
                                            </td>
                                            <td>{{ request.state }}</td>
                                            <td>{{ request.account_number }}
                                                <p class="m-0">{{ request.bank_name }}</p>
                                            </td>
                                        </tr>
                                        <!-- Additional rows -->
                                    {% endfor %}
                                {% else %}
                                    <tr>
                                        <td colspan="6">No rider data available</td>
                                    </tr>
                                {% endif %}
                            </tbody>
                        </table>
                    </div>
                </section>

                <div class="container-fluid mb-3">
                    <div class="table-responsive">
                        <table class="table table-striped table-hover text-nowrap">
                            <thead>
                                <tr>
                                    {% for column in table_data[0].keys() %}
                                        <th>{{ column }}</th>
                                    {% endfor %}
                                </tr>
                            </thead>
                            <tbody>
                                {% for row in table_data %}
                                    <tr>
                                        {% for cell in row.values() %}
                                            <td>{{ cell }}</td>
                                        {% endfor %}
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>

                <hr class="top-nav" style="height: 5px; " />

                <span><h4>Rider Registration</h4></span>
                <form id="form-rider-reg" action="/admin_rider" method="POST">
                    <div id="rider-reg">
                        <div class="row mb-2">
                            <div class="col-lg-6 col-md-6 col-12">
                                <label for="rider_name" class="form-label">Full Name:</label>
                                <p><input type="text" id="rider_name" name="rider_name" value="{{ form_data.get('rider_name', '') }}" class="form-control border focus-ring" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);" placeholder="Your Name" required></p>
                            </div>
                            <div class="col-lg-6 col-md-6 col-12">
                                <label for="rider_email" class="form-label">Email:</label>
                                <p><input type="email" id="rider_email" name="rider_email" value="{{ form_data.get('rider_email', '') }}" class="form-control border focus-ring" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);" placeholder="Your Email" required></p>
                            </div>
                        </div>
                        <div class="row mb-2">
                            <div class="col-lg-6 col-md-6 col-12">
                                <label for="rider_number" class="form-label">Phone Number:</label>
                                <p><input type="text" id="rider_number" name="rider_number" value="{{ form_data.get('rider_number', '') }}" class="form-control border focus-ring" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);" placeholder="Your Number" required></p>
                            </div>
                            <div class="col-lg-6 col-md-6 col-12">
                                <label for="rider_age" class="form-label">Age:</label>
                                <p><input type="number" id="rider_age" name="rider_age" value="{{ form_data.get('rider_age', '') }}" class="form-control border focus-ring" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);" placeholder="Age" required></p>        
                            </div>
                        </div>
                        <div class="row mb-2">
                            <div class="col-lg-6 col-md-6 col-12">
                                <label for="residential_address" class="form-label">Residential Address:</label>
                                <p><input type="text" id="residential_address" name="residential_address" value="{{ form_data.get('residential_Address', '') }}" class="form-control border focus-ring" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);" placeholder="Your Address" required></p>        
                            </div>
                            <div class="col-lg-6 col-md-6 col-12">
                                <label for="rider_city" class="form-label">City:</label>
                                <p><input type="text" id="rider_city" name="rider_city" value="{{ form_data.get('rider_city', '') }}" class="form-control border focus-ring" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);" placeholder="City" required></p>        
                            </div>
                        </div>
                        <div class="row mb-2">
                            <div class="col-lg-6 col-md-6 col-12">
                                <label for="rider_state" class="form-label">State:</label>
                                <p><input type="text" id="rider_state" name="rider_state" value="{{ form_data.get('rider_state', '') }}" class="form-control border focus-ring" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);" placeholder="Your state" required></p>        
                            </div>
                            <div class="col-lg-6 col-md-6 col-12">
                                <label for="acct_num" class="form-label">Account Number:</label>
                                <p><input type="text" id="acct_num" name="acct_num" value="{{ form_data.get('acct_num', '') }}" class="form-control border focus-ring" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);" placeholder="Account Number" required></p>        
                            </div>
                        </div>
                        <div class="row mb-2">
                            <div class="col-lg-6 col-md-6 col-12">
                                <label for="bank_name" class="form-label">Bank Name:</label>
                                <p><input type="text" id="bank_name" name="bank_name" value="{{ form_data.get('bank_name', '') }}" class="form-control border focus-ring" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);" placeholder="Bank Name" required></p>        
                            </div>
                        </div>
                        <!-- for Guarantor's-->
                        <h4>Guarantor's Form</h4>
                        <div class="row mb-2">
                            <div class="col-lg-6 col-md-6 col-12">
                                <label for="guarantor_name" class="form-label">Guarantor Name:</label>
                                <p><input type="text" id="guarantor_name" name="guarantor_name" value="{{ form_data.get('guarantor_name', '') }}" class="form-control border focus-ring" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);" placeholder="Your Guarantor Name" required></p>
                            </div>
                            <div class="col-lg-6 col-md-6 col-12">
                                <label for="guarantor_number" class="form-label">Guarantor Phone Number:</label>
                                <p><input type="tel" id="guarantor_number" name="guarantor_number" value="{{ form_data.get('guarantor_number', '') }}" class="form-control border focus-ring" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);" placeholder="Your Guarantor Number" required></p>
                            </div>
                        </div>
                        <div class="row mb-2">
                            <div class="col-lg-6 col-md-6 col-12">
                                <label for="guarantor_residential_address" class="form-label">Residential Address:</label>
                                <p><input type="text" id="guarantor_residential_address" name="guarantor_residential_address" value="{{ form_data.get('guarantor_residential_Address', '') }}" class="form-control border focus-ring" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);" placeholder="Your Address" required></p>        
                            </div>
                            <div class="col-lg-6 col-md-6 col-12">
                                <label for="guarantor_relatioship" class="form-label">Relationship:</label>
                                <p><input type="text" id="guarantor_relatioship" name="guarantor_relationship" value="{{ form_data.get('guarantor_relationship', '') }}" class="form-control border focus-ring" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);" placeholder="Relationship" required></p>        
                            </div>
                        </div>
                        <div class="row mb-2">
                            <div class="col-lg-6 col-md-6 col-12">
                                <label for="guarantor_occupation" class="form-label">Occupation:</label>
                                <p><input type="text" id="guarantor_occupation" name="guarantor_occupation" value="{{ form_data.get('guarantor_occupation', '') }}" class="form-control border focus-ring" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);" placeholder="Guarantor Occupation" required></p>
                            </div>
                            <div class="col-lg-6 col-md-6 col-12">
                                <label for="guarantor_state" class="form-label">State of Origin:</label>
                                <p><input type="text" id="guarantor_state" name="guarantor_state" value="{{ form_data.get('guarantor_state', '') }}" class="form-control border focus-ring" style="--bs-border-color: #EE940D; --bs-focus-ring-color: rgba(238, 148, 13, 0.48);" placeholder="Your state of residence" required></p>        
                            </div>
                        </div>
                        <div class="mb-4 p-1">
                            <button type="submit" class="btn btn-md btn-stallion">Add Rider</button>
                        </div>
                    </div>
                </form>

            </div>
        
            <div class="col-lg-3">
                <!-- Requests Section -->
                <section id="performer" class="mb-5">
                    <div class="top-performer">
                        <h4>Top Performer</h4>
                        <img src="https://via.placeholder.com/100" alt="Top Performer">
                        <p><strong>Michael Brown</strong></p>
                        <p>State: Abuja</p>
                        <p>Performance: Excellent</p>
                    </div>
                </section>
            </div>
        </div>

        <footer class="footer mt-5">
            <p class="text-center">&copy; 2024 Stallion Routes. All rights reserved.</p>
        </footer>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
      $(document).ready(function () {
        // Toggle sidebar
        $('#toggleSidebar').click(function () {
            $('#sidebar').toggleClass('collapsed');
            $('#mainContent').toggleClass('collapsed');
        });
      });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
</body>
</html>